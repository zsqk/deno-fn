# 安全字符串

## ASCII 字符允许状态表格

| 十进制 | 十六进制 | 字符  | 名称         | 状态    | 说明         | HTML 安全性 |
| ------ | -------- | ----- | ------------ | ------- | ------------ | ----------- |
| 0      | 0x00     | NULL  | 空字符       | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 1      | 0x01     | SOH   | 标题开始     | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 2      | 0x02     | STX   | 正文开始     | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 3      | 0x03     | ETX   | 正文结束     | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 4      | 0x04     | EOT   | 传输结束     | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 5      | 0x05     | ENQ   | 询问字符     | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 6      | 0x06     | ACK   | 确认         | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 7      | 0x07     | BEL   | 响铃         | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 8      | 0x08     | BS    | 退格         | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 9      | 0x09     | TAB   | 制表符       | ❌ 禁止 | 制表符       | 🔴 高风险   |
| 10     | 0x0A     | LF    | 换行符       | ✅ 允许 | 用户输入常用 | 🟢 低风险   |
| 11     | 0x0B     | VT    | 垂直制表符   | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 12     | 0x0C     | FF    | 换页符       | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 13     | 0x0D     | CR    | 回车符       | ❌ 禁止 | 回车符       | 🔴 高风险   |
| 14     | 0x0E     | SO    | 移出         | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 15     | 0x0F     | SI    | 移入         | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 16     | 0x10     | DLE   | 数据链路转义 | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 17     | 0x11     | DC1   | 设备控制1    | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 18     | 0x12     | DC2   | 设备控制2    | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 19     | 0x13     | DC3   | 设备控制3    | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 20     | 0x14     | DC4   | 设备控制4    | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 21     | 0x15     | NAK   | 拒绝接收     | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 22     | 0x16     | SYN   | 同步空闲     | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 23     | 0x17     | ETB   | 传输块结束   | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 24     | 0x18     | CAN   | 取消         | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 25     | 0x19     | EM    | 介质结束     | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 26     | 0x1A     | SUB   | 替换         | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 27     | 0x1B     | ESC   | 转义         | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 28     | 0x1C     | FS    | 文件分隔符   | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 29     | 0x1D     | GS    | 组分隔符     | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 30     | 0x1E     | RS    | 记录分隔符   | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 31     | 0x1F     | US    | 单元分隔符   | ❌ 禁止 | 控制字符     | 🔴 高风险   |
| 32     | 0x20     | SPACE | 空格         | ✅ 允许 | 基本字符     | 🟢 低风险   |
| 33     | 0x21     | !     | 感叹号       | ✅ 允许 | 感叹号       | 🟢 低风险   |
| 34     | 0x22     | "     | 双引号       | ❌ 禁止 | 危险字符     | 🔴 高风险   |
| 35     | 0x23     | #     | 井号         | ✅ 允许 | 标签符号     | 🟢 低风险   |
| 36     | 0x24     | $     | 美元符号     | ✅ 允许 | 变量符号     | 🟢 低风险   |
| 37     | 0x25     | %     | 百分号       | ✅ 允许 | 百分比符号   | 🟡 中风险   |
| 38     | 0x26     | &     | 和号         | ❌ 禁止 | 危险字符     | 🔴 高风险   |
| 39     | 0x27     | '     | 单引号       | ❌ 禁止 | 危险字符     | 🔴 高风险   |
| 40     | 0x28     | (     | 左括号       | ✅ 允许 | 小括号       | 🟢 低风险   |
| 41     | 0x29     | )     | 右括号       | ✅ 允许 | 小括号       | 🟢 低风险   |
| 42     | 0x2A     | *     | 星号         | ✅ 允许 | 通配符       | 🟢 低风险   |
| 43     | 0x2B     | +     | 加号         | ✅ 允许 | 数学运算     | 🟢 低风险   |
| 44     | 0x2C     | ,     | 逗号         | ✅ 允许 | 列表分隔符   | 🟢 低风险   |
| 45     | 0x2D     | -     | 横线         | ✅ 允许 | 横线         | 🟢 低风险   |
| 46     | 0x2E     | .     | 点号         | ✅ 允许 | 文件名       | 🟢 低风险   |
| 47     | 0x2F     | /     | 斜线         | ✅ 允许 | 网址路径     | 🟡 中风险   |
| 48     | 0x30     | 0     | 数字0        | ✅ 允许 | 数字         | 🟢 低风险   |
| 49     | 0x31     | 1     | 数字1        | ✅ 允许 | 数字         | 🟢 低风险   |
| 50     | 0x32     | 2     | 数字2        | ✅ 允许 | 数字         | 🟢 低风险   |
| 51     | 0x33     | 3     | 数字3        | ✅ 允许 | 数字         | 🟢 低风险   |
| 52     | 0x34     | 4     | 数字4        | ✅ 允许 | 数字         | 🟢 低风险   |
| 53     | 0x35     | 5     | 数字5        | ✅ 允许 | 数字         | 🟢 低风险   |
| 54     | 0x36     | 6     | 数字6        | ✅ 允许 | 数字         | 🟢 低风险   |
| 55     | 0x37     | 7     | 数字7        | ✅ 允许 | 数字         | 🟢 低风险   |
| 56     | 0x38     | 8     | 数字8        | ✅ 允许 | 数字         | 🟢 低风险   |
| 57     | 0x39     | 9     | 数字9        | ✅ 允许 | 数字         | 🟢 低风险   |
| 58     | 0x3A     | :     | 冒号         | ✅ 允许 | 时间格式     | 🟡 中风险   |
| 59     | 0x3B     | ;     | 分号         | ✅ 允许 | 分隔符       | 🟡 中风险   |
| 60     | 0x3C     | <     | 小于号       | ✅ 允许 | 比较运算     | 🔴 高风险   |
| 61     | 0x3D     | =     | 等号         | ✅ 允许 | 键值对       | 🔴 高风险   |
| 62     | 0x3E     | >     | 大于号       | ✅ 允许 | 比较运算     | 🔴 高风险   |
| 63     | 0x3F     | ?     | 问号         | ✅ 允许 | 查询符号     | 🟢 低风险   |
| 64     | 0x40     | @     | at符号       | ✅ 允许 | 邮箱符号     | 🟢 低风险   |
| 65     | 0x41     | A     | 大写A        | ✅ 允许 | 字母         | 🟢 低风险   |
| 66     | 0x42     | B     | 大写B        | ✅ 允许 | 字母         | 🟢 低风险   |
| 67     | 0x43     | C     | 大写C        | ✅ 允许 | 字母         | 🟢 低风险   |
| 68     | 0x44     | D     | 大写D        | ✅ 允许 | 字母         | 🟢 低风险   |
| 69     | 0x45     | E     | 大写E        | ✅ 允许 | 字母         | 🟢 低风险   |
| 70     | 0x46     | F     | 大写F        | ✅ 允许 | 字母         | 🟢 低风险   |
| 71     | 0x47     | G     | 大写G        | ✅ 允许 | 字母         | 🟢 低风险   |
| 72     | 0x48     | H     | 大写H        | ✅ 允许 | 字母         | 🟢 低风险   |
| 73     | 0x49     | I     | 大写I        | ✅ 允许 | 字母         | 🟢 低风险   |
| 74     | 0x4A     | J     | 大写J        | ✅ 允许 | 字母         | 🟢 低风险   |
| 75     | 0x4B     | K     | 大写K        | ✅ 允许 | 字母         | 🟢 低风险   |
| 76     | 0x4C     | L     | 大写L        | ✅ 允许 | 字母         | 🟢 低风险   |
| 77     | 0x4D     | M     | 大写M        | ✅ 允许 | 字母         | 🟢 低风险   |
| 78     | 0x4E     | N     | 大写N        | ✅ 允许 | 字母         | 🟢 低风险   |
| 79     | 0x4F     | O     | 大写O        | ✅ 允许 | 字母         | 🟢 低风险   |
| 80     | 0x50     | P     | 大写P        | ✅ 允许 | 字母         | 🟢 低风险   |
| 81     | 0x51     | Q     | 大写Q        | ✅ 允许 | 字母         | 🟢 低风险   |
| 82     | 0x52     | R     | 大写R        | ✅ 允许 | 字母         | 🟢 低风险   |
| 83     | 0x53     | S     | 大写S        | ✅ 允许 | 字母         | 🟢 低风险   |
| 84     | 0x54     | T     | 大写T        | ✅ 允许 | 字母         | 🟢 低风险   |
| 85     | 0x55     | U     | 大写U        | ✅ 允许 | 字母         | 🟢 低风险   |
| 86     | 0x56     | V     | 大写V        | ✅ 允许 | 字母         | 🟢 低风险   |
| 87     | 0x57     | W     | 大写W        | ✅ 允许 | 字母         | 🟢 低风险   |
| 88     | 0x58     | X     | 大写X        | ✅ 允许 | 字母         | 🟢 低风险   |
| 89     | 0x59     | Y     | 大写Y        | ✅ 允许 | 字母         | 🟢 低风险   |
| 90     | 0x5A     | Z     | 大写Z        | ✅ 允许 | 字母         | 🟢 低风险   |
| 91     | 0x5B     | [     | 左方括号     | ✅ 允许 | 数组符号     | 🟢 低风险   |
| 92     | 0x5C     | \     | 反斜线       | ❌ 禁止 | 危险字符     | 🔴 高风险   |
| 93     | 0x5D     | ]     | 右方括号     | ✅ 允许 | 数组符号     | 🟢 低风险   |
| 94     | 0x5E     | ^     | 脱字符       | ❌ 禁止 | 危险字符     | 🔴 高风险   |
| 95     | 0x5F     | _     | 下划线       | ✅ 允许 | 下划线       | 🟢 低风险   |
| 96     | 0x60     | \`    | 反引号       | ❌ 禁止 | 危险字符     | 🔴 高风险   |
| 97     | 0x61     | a     | 小写a        | ✅ 允许 | 字母         | 🟢 低风险   |
| 98     | 0x62     | b     | 小写b        | ✅ 允许 | 字母         | 🟢 低风险   |
| 99     | 0x63     | c     | 小写c        | ✅ 允许 | 字母         | 🟢 低风险   |
| 100    | 0x64     | d     | 小写d        | ✅ 允许 | 字母         | 🟢 低风险   |
| 101    | 0x65     | e     | 小写e        | ✅ 允许 | 字母         | 🟢 低风险   |
| 102    | 0x66     | f     | 小写f        | ✅ 允许 | 字母         | 🟢 低风险   |
| 103    | 0x67     | g     | 小写g        | ✅ 允许 | 字母         | 🟢 低风险   |
| 104    | 0x68     | h     | 小写h        | ✅ 允许 | 字母         | 🟢 低风险   |
| 105    | 0x69     | i     | 小写i        | ✅ 允许 | 字母         | 🟢 低风险   |
| 106    | 0x6A     | j     | 小写j        | ✅ 允许 | 字母         | 🟢 低风险   |
| 107    | 0x6B     | k     | 小写k        | ✅ 允许 | 字母         | 🟢 低风险   |
| 108    | 0x6C     | l     | 小写l        | ✅ 允许 | 字母         | 🟢 低风险   |
| 109    | 0x6D     | m     | 小写m        | ✅ 允许 | 字母         | 🟢 低风险   |
| 110    | 0x6E     | n     | 小写n        | ✅ 允许 | 字母         | 🟢 低风险   |
| 111    | 0x6F     | o     | 小写o        | ✅ 允许 | 字母         | 🟢 低风险   |
| 112    | 0x70     | p     | 小写p        | ✅ 允许 | 字母         | 🟢 低风险   |
| 113    | 0x71     | q     | 小写q        | ✅ 允许 | 字母         | 🟢 低风险   |
| 114    | 0x72     | r     | 小写r        | ✅ 允许 | 字母         | 🟢 低风险   |
| 115    | 0x73     | s     | 小写s        | ✅ 允许 | 字母         | 🟢 低风险   |
| 116    | 0x74     | t     | 小写t        | ✅ 允许 | 字母         | 🟢 低风险   |
| 117    | 0x75     | u     | 小写u        | ✅ 允许 | 字母         | 🟢 低风险   |
| 118    | 0x76     | v     | 小写v        | ✅ 允许 | 字母         | 🟢 低风险   |
| 119    | 0x77     | w     | 小写w        | ✅ 允许 | 字母         | 🟢 低风险   |
| 120    | 0x78     | x     | 小写x        | ✅ 允许 | 字母         | 🟢 低风险   |
| 121    | 0x79     | y     | 小写y        | ✅ 允许 | 字母         | 🟢 低风险   |
| 122    | 0x7A     | z     | 小写z        | ✅ 允许 | 字母         | 🟢 低风险   |
| 123    | 0x7B     | {     | 左花括号     | ✅ 允许 | 对象符号     | 🟢 低风险   |
| 124    | 0x7C     | \|    | 竖线         | ❌ 禁止 | 危险字符     | 🔴 高风险   |
| 125    | 0x7D     | }     | 右花括号     | ✅ 允许 | 对象符号     | 🟢 低风险   |
| 126    | 0x7E     | ~     | 波浪号       | ✅ 允许 | 路径符号     | 🟢 低风险   |
| 127    | 0x7F     | DEL   | 删除         | ❌ 禁止 | 控制字符     | 🔴 高风险   |

## 总结

### ✅ 允许的字符 (共 96 个)

- **控制字符**：仅 `\n` (换行符) - 🟢 低风险
- **可打印字符**：空格、数字 (0-9)、字母 (A-Z, a-z) - 🟢 低风险
- **标点符号**：`!`, `#`, `$`, `%`, `(`, `)`, `+`, `,`, `-`, `.`, `/`, `:`, `;`,
  `<`, `=`, `>`, `?`, `@`, `[`, `]`, `_`, `{`, `}`, `~`, `*`

### ❌ 禁止的字符 (共 32 个)

- **控制字符**：`\x00-\x08`, `\x0B-\x0C`, `\x0E-\x1F`, `\t`, `\r`, `\x7F` - 🔴 高风险
- **危险字符**：`"`, `&`, `'`, `\`, `^`, `` ` ``, `|` - 🔴 高风险

### HTML 安全性分析

#### 🔴 高风险字符 (当前允许但需注意)

- `<`, `>`, `=` - 可构造 HTML 标签和属性，需要 HTML 转义
- `/` - 可闭合标签，需要 HTML 转义
- `:`, `;` - 协议分隔符和 CSS 分隔符，需要 HTML 转义
- `%` - URL 编码，可能绕过过滤

#### 🟡 中风险字符 (当前允许)

- `%` - URL 编码风险
- `/` - 标签闭合风险
- `:`, `;` - 协议和 CSS 风险

#### 🟢 低风险字符 (当前允许)

- 字母、数字、空格、大部分标点符号

### 建议

如果用于 HTML 输出，建议：

1. **HTML 转义**：对 `<`, `>`, `&`, `"`, `'` 进行转义
2. **URL 编码**：对用户输入的 URL 参数进行编码
3. **内容安全策略 (CSP)**：设置适当的 CSP 头

这个设计确保了字符串的安全性，同时允许了用户输入中常用的字符。
